/*! Order Status Check: Handlebars Templates + order-status-check.js 15-12-2016 */
this.JST=this.JST||{},this.JST["js/order-status-check/order-status-check.hbs"]=Handlebars.template({1:function(a,b,c,d,e){var f,g=null!=b?b:{};return"        "+(null!=(f=c["if"].call(g,null!=b?b.dispatch:b,{name:"if",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+"\n        "+(null!=(f=c["if"].call(g,null!=b?b.delivery:b,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+"\n"},2:function(a,b,c,d,e){var f;return'<div class="dispatch-est hidden"><span class="date-label">Dispatch estimate:</span> <strong>'+a.escapeExpression(a.lambda(null!=(f=null!=b?b.dispatch:b)?f.estimate:f,b))+"</strong></div>"},4:function(a,b,c,d,e){var f;return'<div class="delivery-est"><span class="date-label">Delivery estimate:</span> <strong>'+a.escapeExpression(a.lambda(null!=(f=null!=(f=null!=b?b.delivery:b)?f.estimate:f)?f.date:f,b))+"</strong></div>"},6:function(a,b,c,d,e){return'<div class="tracking">Track your delivery:<ul>'},8:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j=a.escapeExpression;return"        <li>"+j((c.tracking_link||b&&b.tracking_link||i).call(h,null!=b?b.tracking_number:b,null!=b?b.tracking_carrier:b,{name:"tracking_link",hash:{},data:e}))+"\n            <div>Shipped: <strong>"+j((g=null!=(g=c.shipped_date_pretty||(null!=b?b.shipped_date_pretty:b))?g:i,"function"==typeof g?g.call(h,{name:"shipped_date_pretty",hash:{},data:e}):g))+"</strong></div>\n"+(null!=(f=c["if"].call(h,null!=b?b.delivery_estimate:b,{name:"if",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+"        </li>\n"},9:function(a,b,c,d,e){var f,g=a.lambda,h=a.escapeExpression;return"                <div>Delivery Estimate ("+h(g(null!=(f=null!=b?b.delivery_estimate:b)?f.method:f,b))+"): <strong>"+h(g(null!=(f=null!=(f=null!=b?b.delivery_estimate:b)?f.estimate:f)?f.date:f,b))+"</strong></div>\n"},11:function(a,b,c,d,e){return"</ul></div>"},13:function(a,b,c,d,e){var f;return'<p class="no-tracking">Your order does not '+(null!=(f=(c.compare||b&&b.compare||c.helperMissing).call(null!=b?b:{},null!=b?b.status:b,"!==","complete",{name:"compare",hash:{},fn:a.program(14,e,0),inverse:a.noop,data:e}))?f:"")+"have tracking details.</p>"},14:function(a,b,c,d,e){return"yet "},16:function(a,b,c,d,e){return"On Hold"},18:function(a,b,c,d,e){return"Processing"},20:function(a,b,c,d,e){var f;return' title="Dispatch estimate: '+a.escapeExpression(a.lambda(null!=(f=null!=b?b.dispatch:b)?f.date_pretty:f,b))+'"'},22:function(a,b,c,d,e){var f;return' title="Delivery estimate: '+a.escapeExpression(a.lambda(null!=(f=null!=(f=null!=b?b.delivery:b)?f.estimate:f)?f.date:f,b))+'"'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function",k=a.escapeExpression,l=a.lambda;return"<h2>Order #"+k((g=null!=(g=c.number||(null!=b?b.number:b))?g:i,typeof g===j?g.call(h,{name:"number",hash:{},data:e}):g))+'</h2>\n<div class="l_two_thirds l_tablet_two_thirds l_mobile_full arrow-right">\n    <div class="status">Order Status: <strong>'+k((c.better_status||b&&b.better_status||i).call(h,null!=b?b.status:b,null!=b?b.tracking:b,{name:"better_status",hash:{},data:e}))+"</strong> <em>"+k((c.status_detail||b&&b.status_detail||i).call(h,null!=b?b.status:b,null!=b?b.tracking:b,{name:"status_detail",hash:{},data:e}))+'</em></div>\n    <div class="placed"><span class="date-label">Placed on:</span> <strong>'+k(l(null!=(f=null!=b?b.placed:b)?f.date_pretty:f,b))+"</strong></div>\n"+(null!=(f=(c.compare||b&&b.compare||i).call(h,null!=b?b.status:b,"!=","holded",{name:"compare",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"    "+(null!=(f=c["if"].call(h,null!=b?b.tracking:b,{name:"if",hash:{},fn:a.program(6,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=c.each.call(h,null!=b?b.tracking:b,{name:"each",hash:{},fn:a.program(8,e,0),inverse:a.noop,data:e}))?f:"")+'    <div class="tracking-warning"><strong>Tracking number not working?</strong> Please allow 3-6 hours after dispatch (see "Shipped" date above) for your tracking number to be scanned and become active.</div>\n    '+(null!=(f=c["if"].call(h,null!=b?b.tracking:b,{name:"if",hash:{},fn:a.program(11,e,0),inverse:a.program(13,e,0),data:e}))?f:"")+'\n</div>\n<div class="l_third l_tablet_third l_mobile_full l_last status-'+k((g=null!=(g=c.status||(null!=b?b.status:b))?g:i,typeof g===j?g.call(h,{name:"status",hash:{},data:e}):g))+'">\n    <ul class="order-progress">\n        <li title="Placed: '+k(l(null!=(f=null!=b?b.placed:b)?f.date_pretty:f,b))+'"><i class="i_checkmark"></i> Placed</li>\n        <li><i class="i_package"></i> '+(null!=(f=(c.compare||b&&b.compare||i).call(h,null!=b?b.status:b,"==","holded",{name:"compare",hash:{},fn:a.program(16,e,0),inverse:a.program(18,e,0),data:e}))?f:"")+"</li>\n        <li"+(null!=(f=c["if"].call(h,null!=b?b.dispatch:b,{name:"if",hash:{},fn:a.program(20,e,0),inverse:a.noop,data:e}))?f:"")+'><i class="i_van"></i> In Transit</li>\n        <li'+(null!=(f=c["if"].call(h,null!=b?b.delivery:b,{name:"if",hash:{},fn:a.program(22,e,0),inverse:a.noop,data:e}))?f:"")+'><i class="i_box"></i> Complete</li>\n    </ul>\n</div>'},useData:!0}),function(a){"use strict";a(document).on("ready",function(){var b=a(".order-status-check");Handlebars.registerHelper("tracking_link",function(a,b){a=Handlebars.Utils.escapeExpression(a),b=Handlebars.Utils.escapeExpression(b);var c,d="",e=a;switch(b){case"eparcel":d="https://auspost.com.au/parcels-mail/track.html#/track?id="+a,e="<i class='i_auspost'></i> "+a;break;case"dhlint":d="http://www.dhl.com.au/en/express/tracking.html?AWB="+a+"&brand=DHL",e="DHL: "+a}return c=d?"<a target='_blank' href='"+d+"'>"+e+"</a>":"<span class='carrier-"+b+"'>"+a+"</span>",new Handlebars.SafeString(c)}),Handlebars.registerHelper("status_detail",function(a,b){a=Handlebars.Utils.escapeExpression(a);var c;switch("processing"===a&&b.length&&(a="short-shipped"),a){case"processing":c="Your order is being picked & packed.";break;case"short-shipped":c="Only part of your order has been shipped.";break;case"holded":c="You may be contacted to confirm order or address details.";break;case"in-transit":c="Your order has left the warehouse and is en route for delivery.";break;case"complete":c="";break;default:c=""}return new Handlebars.SafeString(c)}),Handlebars.registerHelper("better_status",function(a,b){return a=Handlebars.Utils.escapeExpression(a),"processing"===a&&b.length?a="partially shipped":"holded"===a&&(a="on hold"),new Handlebars.SafeString(a)}),b.on("click",".btn",function(){var c=b.find(".order-status-results");if(!b.find('input[name="order"]').val()||!b.find('input[name="postcode"]').val())return b.addClass("error"),void c.text("Please enter a valid order number and delivery postcode.");var d,e,f,g=b.find('input[name="form_key"]'),h=a(this).prop("disabled",!0);b.removeClass("error").addClass("isloading"),a.when(a.ajax({url:"/timestamp.php",dataType:"text",cache:!1}).done(function(a){e=1*a,d=new Date(e)}).fail(function(){d=new Date,e=Math.round(d.getTime())}),a.ajax({url:g.data("baseUrl")+"pacbrands_sales/order/status",data:b.find(":input").serializeArray(),dataType:"json",method:"post"}).done(function(a){var b=JST["js/order-status-check/order-status-check.hbs"];c.html(b(a))}).fail(function(a){b.addClass("error"),400===a.status?c.text(a.responseText):404===a.status?c.html("<strong>Order not found.</strong><br>Please confirm details and try again. Note: Only orders placed in the last 60 days can be checked."):c.text("There was an error retrieving your order details. Please check your order number and postcode and try again."),console.log(a)})).then(function(a,c){if(c[0].tracking.length){var d=Math.round(new Date(c[0].tracking.slice(-1)[0].shipped_date).getTime());f=e-d<216e5,b.toggleClass("show-tracking-warning",f)}},function(a,b,c){}).always(function(){b.removeClass("isloading"),h.prop("disabled",!1)})}).on("keydown","input",function(a){13===a.keyCode?(a.preventDefault(),b.find(".btn").not(":disabled").click()):b.removeClass("error")})})}(jQuery);